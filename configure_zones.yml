---
- name: Configure zones
  hosts: "{{ hostlist | default('all') }}"
  gather_facts: no

  tasks:
    - name: Collect default set of facts
      junipernetworks.junos.junos_facts:
        config_format: json
        gather_subset: config
      register: facts_output

    - name: Print message
      debug:
        msg: "Configuring {{ item.name }} with interface {{ item.interfaces[0] }}"
      with_items: "{{ srx_security_zones }}"

    - name: Ensure zone is configured
      junipernetworks.junos.junos_security_zones:
        config:
          zones:
            - name: untrusted-public-zone
              interfaces:
                - ge-0/0/0.0
        state: replaced
